<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Dropzone - Spectrum Web Components</title>
        <script type="module">
            // import the illustratedmessage element too
            import {
                defineCustomElements,
                IllustratedMessage,
                Link,
                Dropzone,
            } from '../../index.js';
            defineCustomElements(IllustratedMessage, Link, Dropzone);
            // import and define the demo page components
            import * as DemoElements from '../../demo-page/index.js';
            defineCustomElements(...Object.values(DemoElements));
        </script>
        <link rel="stylesheet" href="../../../styles/all-medium-light.css" />
    </head>

    <body>
        <demo-page title="Dropzone">
            <demo-section title="Dropzone" show-demo-code>
                <div slot="description">
                    The Dropzone component lets you drop items onto it using the
                    <a
                        href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API"
                    >
                        Drag and Drop API
                    </a>
                    . The following is an example that shows how you might
                    construct a file upload dropzone that only accepts image
                    files.
                </div>
                <div slot="demo">
                    <sp-dropzone id="dropzone">
                        <sp-illustrated-message
                            heading="Drag and Drop Your File"
                        >
                            <svg>
                                <use
                                    xlink:href="geometry.svg#upload_geometry"
                                />
                            </svg>
                        </sp-illustrated-message>

                        <div style="color: grey">
                            <div>
                                <label for="file-input">
                                    <sp-link>Select a File</sp-link>
                                    from your computer
                                </label>
                                <input
                                    type="file"
                                    id="file-input"
                                    style="display: none"
                                />
                            </div>
                            <div>
                                or
                                <sp-link
                                    href="http://stock.adobe.com"
                                    target="blank"
                                >
                                    Search Adobe Stock
                                </sp-link>
                            </div>
                        </div>
                    </sp-dropzone>

                    <script>
                        const dropzone = document.getElementById('dropzone');
                        dropzone.addEventListener(
                            'dropzone-should-accept',
                            (ev) => {
                                var fileType = ev.detail.dataTransfer.items[0].type.split(
                                    '/'
                                )[0];
                                if (fileType != 'image') {
                                    ev.preventDefault();
                                }
                            }
                        );
                        dropzone.addEventListener('dropzone-drop', (ev) => {
                            // do something with ev.detail.dataTransfer
                            alert(
                                'Uploading : ' +
                                    ev.detail.dataTransfer.files[0].name
                            );
                        });
                    </script>
                </div>
            </demo-section>
        </demo-page>
    </body>
</html>
