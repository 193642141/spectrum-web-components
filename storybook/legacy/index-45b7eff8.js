System.register(["./storybook-preview-e56323fc.js","./lit-element-12678eac.js"],(function(){"use strict";var e,t,n,s,o,i,u,r,c,d,a,l;return{setters:[function(a){e=a.n,t=a.c,n=a.f,s=a.g,o=a.h,i=a.D,u=a.d,r=a.j,c=a.E,d=a.k},function(e){a=e.c,l=e.L}],execute:function(){function m(){var t=e([":host{box-sizing:border-box;margin:var(--spectrum-popover-padding-y,var(--spectrum-global-dimension-size-50)) 0;padding:0;list-style-type:none;overflow:auto;display:block;background-color:var(--spectrum-selectlist-background-color,var(--spectrum-alias-background-color-transparent));display:inline-block}:host sp-menu{display:block}"]);return m=function(){return t},t}var h=a(m());function I(){var t=e([' <slot @slotchange="','"></slot> ']);return I=function(){return t},t}var f=function(e){function a(){var e;return n(this,a),(e=s(this,o(a).call(this))).menuItems=[],e.focusedItemIndex=0,e.focusInItemIndex=0,e.handleKeydown=e.handleKeydown.bind(i(e)),e.startListeningToKeyboard=e.startListeningToKeyboard.bind(i(e)),e.stopListeningToKeyboard=e.stopListeningToKeyboard.bind(i(e)),e.onClick=e.onClick.bind(i(e)),e.addEventListener("click",e.onClick),e.addEventListener("focusin",e.startListeningToKeyboard),e.addEventListener("focusout",e.stopListeningToKeyboard),e}return t(a,e),u(a,[{key:"focus",value:function(){if(0!==this.menuItems.length){var e=this.menuItems[this.focusInItemIndex];this.focusedItemIndex=this.focusInItemIndex,e.focus()}}},{key:"onClick",value:function(e){var t=this;e.composedPath().find((function(e){return e instanceof Element&&e.getAttribute("role")===t.childRole}))&&this.prepareToCleanUp()}},{key:"startListeningToKeyboard",value:function(){0!==this.menuItems.length&&this.addEventListener("keydown",this.handleKeydown)}},{key:"stopListeningToKeyboard",value:function(){this.removeEventListener("keydown",this.handleKeydown)}},{key:"handleKeydown",value:function(e){var t=e.code;if("Tab"!==t){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var n="ArrowDown"===t?1:-1;this.focusMenuItemByOffset(n)}}else this.prepareToCleanUp()}},{key:"focusMenuItemByOffset",value:function(e){var t=this.menuItems[this.focusedItemIndex];this.focusedItemIndex=(this.menuItems.length+this.focusedItemIndex+e)%this.menuItems.length;for(var n=this.menuItems[this.focusedItemIndex];n.disabled;)this.focusedItemIndex=(this.menuItems.length+this.focusedItemIndex+e)%this.menuItems.length,n=this.menuItems[this.focusedItemIndex];n.focus(),t.tabIndex=-1}},{key:"prepareToCleanUp",value:function(){var e=this;document.addEventListener("focusout",(function(){requestAnimationFrame((function(){e.querySelector("[selected]")&&(e.menuItems[e.focusInItemIndex].tabIndex=-1);e.updateSelectedItemIndex(),e.menuItems[e.focusInItemIndex].tabIndex=0}))}),{once:!0})}},{key:"updateSelectedItemIndex",value:function(){for(var e=this.menuItems.length-1,t=this.menuItems[e];e&&t&&!t.selected;)e-=1,t=this.menuItems[e];this.focusedItemIndex=e,this.focusInItemIndex=e}},{key:"handleSlotchange",value:function(){(this.menuItems=r(this.querySelectorAll('[role="'.concat(this.childRole,'"]'))),this.menuItems&&0!==this.menuItems.length)&&(this.updateSelectedItemIndex(),this.menuItems[this.focusInItemIndex].tabIndex=0)}},{key:"render",value:function(){return c(I(),this.handleSlotchange)}},{key:"connectedCallback",value:function(){if(d(o(a.prototype),"connectedCallback",this).call(this),!this.hasAttribute("role")){var e=new CustomEvent("sp-menu-query-role",{bubbles:!0,composed:!0,detail:{role:""}});this.dispatchEvent(e),this.setAttribute("role",e.detail.role||"menu")}}},{key:"childRole",get:function(){return"menu"===this.getAttribute("role")?"menuitem":"option"}}],[{key:"styles",get:function(){return[h]}}]),a}(l);customElements.define("sp-menu",f)}}}));
//# sourceMappingURL=index-45b7eff8.js.map
