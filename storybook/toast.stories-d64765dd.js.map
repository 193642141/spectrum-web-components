{"version":3,"file":"toast.stories-d64765dd.js","sources":["../../../packages/toast/lib/toast.css.js","../../../packages/toast/lib/toast.js","../../../packages/toast/lib/index.js","../../../packages/toast/stories/toast.stories.js"],"sourcesContent":["/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { css } from 'lit-element';\nconst styles = css `\n:host{box-sizing:border-box;display:inline-flex;flex-direction:row;align-items:stretch;border-radius:var(--spectrum-toast-border-radius,var(--spectrum-global-dimension-static-size-50));padding:var(--spectrum-toast-padding-y,var(--spectrum-global-dimension-size-100)) var(--spectrum-toast-padding-right,var(--spectrum-global-dimension-size-100)) var(--spectrum-toast-padding-y,var(--spectrum-global-dimension-size-100)) var(--spectrum-toast-padding-left,var(--spectrum-global-dimension-size-200));font-size:var(--spectrum-toast-text-size,var(--spectrum-alias-font-size-default));font-weight:var(--spectrum-toast-text-font-weight,var(--spectrum-global-font-weight-bold));-webkit-font-smoothing:antialiased;background-color:var(--spectrum-toast-background-color,var(--spectrum-global-color-static-gray-700));color:var(--spectrum-toast-background-color,var(--spectrum-global-color-static-gray-700))}.type{flex-shrink:0;flex-grow:0;margin:var(--spectrum-global-dimension-size-85) var(--spectrum-toast-icon-padding-right,var(--spectrum-global-dimension-size-150)) var(--spectrum-global-dimension-size-85) 0;color:#fff}.content{flex:1 1 auto;display:inline-block;box-sizing:border-box;padding:var(--spectrum-global-dimension-size-65) var(--spectrum-toast-content-padding-right,var(--spectrum-global-dimension-size-200)) var(--spectrum-global-dimension-size-65) 0;text-align:left;color:var(--spectrum-toast-text-color,var(--spectrum-global-color-static-white))}.buttons{display:flex;flex:0 0 auto;align-items:flex-start;border-left-color:hsla(0,0%,100%,.2)}.buttons .spectrum-ClearButton+.spectrum-ClearButton,.buttons .spectrum-ClearButton+::slotted([slot=action]){margin-left:var(--spectrum-toast-button-gap,var(--spectrum-global-dimension-size-100))}.body{flex:1 1 auto;align-self:center}.body ::slotted([slot=action]){float:right;margin-right:var(--spectrum-global-dimension-size-130)}.body+.buttons{padding-left:var(--spectrum-toast-padding-right,var(--spectrum-global-dimension-size-100));border-left-width:1px;border-left-style:solid}:host([variant=warning]){background-color:var(--spectrum-toast-warning-background-color,var(--spectrum-global-color-static-orange-700))}:host([variant=warning]),:host([variant=warning]) .closeButton.focus-visible:not(:active){color:var(--spectrum-toast-warning-background-color,var(--spectrum-global-color-static-orange-700))}:host([variant=error]),:host([variant=negative]){background-color:var(--spectrum-toast-error-background-color,var(--spectrum-global-color-static-red-700))}:host([variant=error]),:host([variant=error]) .closeButton.focus-visible:not(:active),:host([variant=negative]),:host([variant=negative]) .closeButton.focus-visible:not(:active){color:var(--spectrum-toast-error-background-color,var(--spectrum-global-color-static-red-700))}:host([variant=info]){background-color:var(--spectrum-toast-info-background-color,var(--spectrum-global-color-static-blue-700))}:host([variant=info]),:host([variant=info]) .closeButton.focus-visible:not(:active){color:var(--spectrum-toast-info-background-color,var(--spectrum-global-color-static-blue-700))}:host([variant=positive]),:host([variant=success]){background-color:var(--spectrum-toast-positive-background-color,var(--spectrum-global-color-static-green-700))}:host([variant=positive]),:host([variant=positive]) .closeButton.focus-visible:not(:active),:host([variant=success]),:host([variant=success]) .closeButton.focus-visible:not(:active){color:var(--spectrum-toast-positive-background-color,var(--spectrum-global-color-static-green-700))}.content{line-height:1.5}:host(:not([open])){display:none}\n`;\nexport default styles;\n//# sourceMappingURL=toast.css.js.map","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { __decorate } from \"tslib\";\nimport { html, LitElement, property, } from 'lit-element';\nimport '@spectrum-web-components/button';\nimport '@spectrum-web-components/icon';\nimport '@spectrum-web-components/icons';\nimport toastStyles from './toast.css.js';\nexport const toastVariants = [\n    'negative',\n    'positive',\n    'info',\n    'error',\n    'warning',\n];\n/**\n * @slot - The toast content\n */\nexport class Toast extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.open = false;\n        this._timeout = null;\n        this._variant = '';\n        this.countdownStart = 0;\n        this.nextCount = -1;\n        this.doCountdown = (time) => {\n            if (!this.countdownStart) {\n                this.countdownStart = performance.now();\n            }\n            if (time - this.countdownStart > this._timeout) {\n                this.open = false;\n            }\n            else {\n                this.countdown();\n            }\n        };\n        this.countdown = () => {\n            cancelAnimationFrame(this.nextCount);\n            this.nextCount = requestAnimationFrame(this.doCountdown);\n        };\n        this.holdCountdown = () => {\n            this.stopCountdown();\n            this.addEventListener('focusout', this.resumeCountdown);\n        };\n        this.resumeCountdown = () => {\n            this.removeEventListener('focusout', this.holdCountdown);\n            this.countdown();\n        };\n    }\n    static get styles() {\n        return [toastStyles];\n    }\n    set timeout(timeout) {\n        const hasTimeout = typeof timeout !== null && timeout > 0;\n        const newTimeout = hasTimeout\n            ? Math.max(6000, timeout)\n            : null;\n        const oldValue = this.timeout;\n        if (newTimeout && this.countdownStart) {\n            this.countdownStart = performance.now();\n        }\n        this._timeout = newTimeout;\n        this.requestUpdate('timeout', oldValue);\n    }\n    get timeout() {\n        return this._timeout;\n    }\n    /**\n     * The variant applies specific styling when set to `negative`, `positive`, `info`, `error`, or `warning`.\n     * `variant` attribute is removed when not matching one of the above.\n     *\n     * @param {String} variant\n     */\n    set variant(variant) {\n        if (variant === this.variant) {\n            return;\n        }\n        const oldValue = this.variant;\n        if (toastVariants.includes(variant)) {\n            this.setAttribute('variant', variant);\n            this._variant = variant;\n        }\n        else {\n            this.removeAttribute('variant');\n            this._variant = '';\n        }\n        this.requestUpdate('variant', oldValue);\n    }\n    get variant() {\n        return this._variant;\n    }\n    renderIcon(variant) {\n        let label = '';\n        let name = '';\n        switch (variant) {\n            case 'info':\n                label = 'Information';\n                name = 'ui:InfoSmall';\n                break;\n            case 'negative':\n            case 'error': // deprecated\n            case 'warning': // deprecated\n                label = 'Error';\n                name = 'ui:AlertSmall';\n                break;\n            case 'positive':\n            case 'success': // deprecated\n                label = 'Success';\n                name = 'ui:SuccessSmall';\n                break;\n            default:\n                return html ``;\n        }\n        return html `\n            <sp-icon\n                class=\"type\"\n                label=${label}\n                name=${name}\n                size=\"s\"\n            ></sp-icon>\n        `;\n    }\n    startCountdown() {\n        this.countdown();\n        this.addEventListener('focusin', this.holdCountdown);\n    }\n    stopCountdown() {\n        cancelAnimationFrame(this.nextCount);\n        this.countdownStart = 0;\n    }\n    close() {\n        this.open = false;\n    }\n    render() {\n        return html `\n            <sp-icons-medium></sp-icons-medium>\n            ${this.renderIcon(this.variant)}\n            <div class=\"body\">\n                <div class=\"content\">\n                    <slot></slot>\n                </div>\n                <slot name=\"action\"></slot>\n            </div>\n            <div class=\"buttons\">\n                <sp-clear-button\n                    label=\"Close\"\n                    variant=\"overBackground\"\n                    @click=${this.close}\n                ></sp-clear-button>\n            </div>\n        `;\n    }\n    firstUpdated(changes) {\n        super.firstUpdated(changes);\n        this.setAttribute('role', 'alert');\n        this.open = true;\n    }\n    updated(changes) {\n        super.updated(changes);\n        if (changes.has('open') && this.timeout) {\n            if (this.open) {\n                this.startCountdown();\n            }\n            else {\n                this.stopCountdown();\n                const applyDefault = this.dispatchEvent(new CustomEvent('close', {\n                    composed: true,\n                    bubbles: true,\n                    cancelable: true,\n                }));\n                if (!applyDefault) {\n                    this.open = true;\n                }\n            }\n        }\n        if (changes.has('timeout')) {\n            if (this.timeout !== null && this.open) {\n                this.startCountdown();\n            }\n            else {\n                this.stopCountdown();\n            }\n        }\n    }\n}\n__decorate([\n    property({ type: Boolean, reflect: true })\n], Toast.prototype, \"open\", void 0);\n__decorate([\n    property({ type: Number })\n], Toast.prototype, \"timeout\", null);\n__decorate([\n    property({ type: String })\n], Toast.prototype, \"variant\", null);\n//# sourceMappingURL=toast.js.map","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nexport * from './toast.js';\nimport { Toast } from './toast.js';\n/* istanbul ignore else */\nif (!customElements.get('sp-toast')) {\n    customElements.define('sp-toast', Toast);\n}\n//# sourceMappingURL=index.js.map","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { html, select, boolean, text } from '@open-wc/demoing-storybook';\nimport '../';\nimport { toastVariants } from '../';\nconst toast = ({ variant = '', disappearing = false, open = true, content = '', }) => html `\n    <sp-toast variant=${variant} ?disappearing=${disappearing} ?open=${open}>\n        ${content}\n        <sp-button slot=\"action\" variant=\"overBackground\" quiet>Undo</sp-button>\n    </sp-toast>\n`;\nexport default {\n    component: 'sp-toast',\n    title: 'Toast',\n};\nexport const Default = () => {\n    const content = text('Content', 'This is a toast message.', 'Component');\n    const variants = ['', ...toastVariants];\n    const variant = select('Variant', variants, variants[0], 'Component');\n    const disappearing = boolean('Disappearing', false, 'Component');\n    const open = boolean('Open', true, 'Component');\n    return toast({ variant, disappearing, open, content });\n};\nconst variantDemo = (variant) => {\n    const content = text('Content', 'This is a toast message.', 'Component');\n    const disappearing = boolean('Disappearing', false, 'Component');\n    const open = boolean('Open', true, 'Component');\n    return toast({ variant, disappearing, open, content });\n};\nexport const Positive = () => variantDemo('positive');\nexport const Negative = () => variantDemo('negative');\nexport const Info = () => variantDemo('info');\n//# sourceMappingURL=toast.stories.js.map"],"names":["styles","css","toastVariants","Toast","LitElement","[object Object]","open","_timeout","_variant","countdownStart","nextCount","doCountdown","time","this","performance","now","countdown","cancelAnimationFrame","requestAnimationFrame","holdCountdown","stopCountdown","addEventListener","resumeCountdown","removeEventListener","toastStyles","timeout","newTimeout","Math","max","oldValue","requestUpdate","variant","includes","setAttribute","removeAttribute","label","name","html","renderIcon","close","changes","firstUpdated","updated","has","startCountdown","dispatchEvent","CustomEvent","composed","bubbles","cancelable","__decorate","property","type","Boolean","reflect","Number","String","customElements","get","define","toast","content","Default","text","variants","disappearing","boolean","component"],"mappings":"2XAYA,IAAMA,EAASC,CAAG,+gHCcLC,EAAiC,CAC1C,WACA,WACA,OACA,QACA,WAeE,MAAOC,UAAcC,EAA3BC,uCAMWC,MAAO,OAoBPC,SAA0B,UA4BzBC,SAA0B,QAkC1BC,eAAiB,OACjBC,WAAa,OAEbC,YAAeC,IACdC,KAAKJ,sBACDA,eAAiBK,YAAYC,OAElCH,EAAOC,KAAKJ,eAAkBI,KAAKN,cAC9BD,MAAO,OAEPU,kBAILA,UAAY,KAChBC,qBAAqBJ,KAAKH,gBACrBA,UAAYQ,sBAAsBL,KAAKF,mBAGxCQ,cAAgB,UACfC,qBACAC,iBAAiB,WAAYR,KAAKS,uBAGnCA,gBAAkB,UACjBC,oBAAoB,WAAYV,KAAKM,oBACrCH,uCAhHE,CAACQ,eAOOC,OAETC,EADgC,cAAZD,GAAqBA,EAAqB,EAE9DE,KAAKC,IAAI,IAAMH,GACf,KACAI,EAAWhB,KAAKY,QAClBC,GAAcb,KAAKJ,sBACdA,eAAiBK,YAAYC,YAEjCR,SAAWmB,OACXI,cAAc,UAAWD,wBAIvBhB,KAAKN,qBAYGwB,MACXA,IAAYlB,KAAKkB,aAGfF,EAAWhB,KAAKkB,QAClB7B,EAAc8B,SAASD,SAClBE,aAAa,UAAWF,QACxBvB,SAAWuB,SAEXG,gBAAgB,gBAChB1B,SAAW,SAEfsB,cAAc,UAAWD,yBAIvBhB,KAAKL,SAKRH,WAAW0B,OACXI,EAAQ,GACRC,EAAO,UACHL,OACC,OACDI,EAAQ,cACRC,EAAO,yBAEN,eACA,YACA,UACDD,EAAQ,QACRC,EAAO,0BAEN,eACA,UACDD,EAAQ,UACRC,EAAO,uCAGAC,CAAI,UAEZA,CAAI,iCAGKF,YACDC,0BAmCX/B,sBACCW,iBACAK,iBAAiB,UAAWR,KAAKM,eAGlCd,gBACJY,qBAAqBJ,KAAKH,gBACrBD,eAAiB,EAGnBJ,aACEC,MAAO,EAGND,gBACCgC,CAAI,wCAELxB,KAAKyB,WAAWzB,KAAKkB,mMAWNlB,KAAK0B,oCAMpBlC,aAAamC,SACbC,aAAaD,QACdP,aAAa,OAAQ,cACrB3B,MAAO,EAGND,QAAQmC,UACRE,QAAQF,GACVA,EAAQG,IAAI,SAAW9B,KAAKY,WACxBZ,KAAKP,UACAsC,uBAEAxB,gBACgBP,KAAKgC,cACtB,IAAIC,YAAY,QAAS,CACrBC,UAAU,EACVC,SAAS,EACTC,YAAY,YAIX3C,MAAO,KAIpBkC,EAAQG,IAAI,aACS,OAAjB9B,KAAKY,SAAoBZ,KAAKP,UACzBsC,sBAEAxB,kBA9KjB8B,EAAA,CADCC,EAAS,CAAEC,KAAMC,QAASC,SAAS,gCAIpCJ,EAAA,CADCC,EAAS,CAAEC,KAAMG,gCAYjB,MAeDL,EAAA,CADCC,EAAS,CAAEC,KAAMI,gCAcjB,MC9EAC,eAAeC,IAAI,aACpBD,eAAeE,OAAO,WAAYxD,GCAtC,IAAMyD,EAAQ,EACV7B,QAAAA,EAAU,qBAEVzB,KAAAA,GAAO,EACPuD,QAAAA,EAAU;;UAGJA;;;EAUGC,EAAU,SACbD,EAAUE,EAAK,UAAW,wCAC1BC,EAAW,CAAC,MAAO9D,qCAEnB+D,EAAeC,EAAQ,gBAAgB,eACvC5D,EAAO4D,EAAQ,QAAQ,EAAM,oBAC5BN,EAAM,CAAE7B,QAAAA,EAASkC,aAAAA,EAAc3D,KAAAA,qTAX3B,CACX6D,UAAW"}